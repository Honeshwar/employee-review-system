<style>
    #Feedback-form-container{
        background-color:bisque ;
        /* width:100%;
        height:100px; */
        padding: 20px;
        /* border: solid; */

        width: 100%;
        height: 15%;

        /* to center btn */
        display: flex;
        justify-content: center;
        align-items: center;
    }
    #trigger-modal-btn{
        box-shadow: inset 0 0 2px 2px rgb(8, 97, 170);
        text-shadow: 0 0 1px black;
        padding: 10px;
        font-family: monospace;
        font-weight: 900;
        font-size: 1.2rem;
    }
    #trigger-modal-btn:hover{
        box-shadow:  0 0 5px 7px rgb(48, 41, 41);
    }
   
    #list-of-feedbacks{
        margin-top: 20px;
        margin-bottom: 10px;
        padding:10px;
        display: flex;
        justify-content: space-evenly;
        flex-flow: wrap;

        /* border: solid; */
        overflow-y: auto;
        height:80%;
        width: 100%;
    }
    .card{
        width: 400px;
        margin-bottom: 10px;
        height: fit-content;
    }
    #no-data-container{
        padding: 20px;
        display: flex;
        flex-direction: column;
        justify-content: space-evenly;
        align-items: center;
    }
    #no-data-container img{
        width: 200px;
    }

</style>

<main id="main">
 
    <section id="list-of-feedbacks">
        <% if( locals.feedbacks.length === 0 ){ %>
           <div id="no-data-container">
            <img style="height: fit-content;" src="https://cdn-icons-png.flaticon.com/128/7486/7486754.png" alt="no data picture" >
            <h4>No Feedback is present in db, added Feedback will be displayed here...</h4>
           </div>
          <%}else{%>

            <% for(let i=0;i<feedbacks.length;i++){ %>
                <div class="card" style="height: fit-content;">
                    <h5 class="card-header">Feedback: <%= i+1 %> </h5>
                    <div class="card-body">
                    <h5 class="card-title">From: <%= feedbacks[i].from.name %></h5>
                    <!-- <h5 class="card-title">To: <%= feedbacks[i].to.name %></h5> -->
                    <p class="card-text">Review: <i> <%= feedbacks[i].feedback %></i></p>
                    </div>
                </div>  
        <%}}%>   
    </section>

    <section id="Feedback-form-container">
        <!-- Button trigger modal -->
        <button id="trigger-modal-btn" type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addFeedbackModal" title="do Feedback to any employee/admin">
            Do Feedback
        </button>
        
        <!-- Modal -->
        <form action="/employee/feedback/add" method="post" class="modal fade" id="addFeedbackModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog ">
            <div class="modal-content">
                <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Feedback Form</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="exampleFormControlInput1" class="form-label">From:</label>
                        <input type="text" class="form-control" id="exampleFormControlInput1" "
                        value="<%= locals?.currentSessionUser.name %>"
                        disabled >

                        <input type="hidden" name="from" value="<%= locals?.currentSessionUser.id %>" >
                    </div>
                    <div class="mb-3">
                        <label for="select" class="form-label">To:</label>
                        <select name="to" id="select" class="form-select" aria-label="Default select example" required>
                           <% for(let user of locals.users){ %>
                            <% if(user.id === locals?.currentSessionUser.id){ continue;} %>
                            <option value=<%= user.id %> ><%= user.name %> <% if(user.role==='admin'){%>
                                ( Admin )
                            <%}else{%>
                             ( Employee )
                             <%}}%>
                            </option>
                          </select>
                      </div>
                      <div class="mb-3">
                        <label for="exampleFormControlTextarea1" class="form-label">Review :</label>
                        <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="feedback" placeholder="Write Review here..." required></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Submit Feedback</button>
                </div>
            </div>
            </div>
        </form>
    </section>

</main>

